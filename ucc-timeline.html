<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>UCC Timeline — Static Details</title>
<style>
  :root{
    --bg:#0b0e14; --panel:#121723; --card:#111827; --muted:#9aa4b2; --text:#e5e7eb;
    --line:#2a3548; --accent:#60a5fa; --accent-2:#22d3ee; --ring:#93c5fd;
    --node:#dbeafe; --node-border:#1e293b;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,ui-sans-serif;
    color:var(--text); background:linear-gradient(180deg,#0a0d13 0%, #0b1120 60%, #0a0d13 100%);
  }
  .wrap{max-width:1200px;margin:0 auto;padding:24px;display:flex;flex-direction:column;gap:18px;min-height:100%}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
  h1{font-size:clamp(20px,3vw,28px);margin:0}
  .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .btn{
    appearance:none;border:1px solid #2b3546;color:var(--text);background:#0f1624;
    padding:8px 12px;border-radius:10px;cursor:pointer;transition:transform .08s ease,border-color .2s;
  }
  .btn:hover{border-color:#3b4861}
  .btn:focus{outline:2px solid var(--ring);outline-offset:2px}
  .btn[aria-pressed="true"]{border-color:var(--accent);box-shadow:0 0 0 2px rgb(96 165 250 / .25) inset}

  /* Timeline area */
  .timeline{
    position:relative;background:linear-gradient(180deg,#0c1220,#0b1324);
    border:1px solid #1f2a3c;border-radius:16px;padding:28px;min-height:260px;overflow:clip;
  }
  .timeline[data-orientation="horizontal"]{height:300px}
  .timeline[data-orientation="vertical"]{min-height:520px}

  .rail{
    position:absolute;inset:auto 28px auto 28px;height:4px;background:var(--line);
    top:calc(50% - 2px);border-radius:3px;
  }
  .timeline[data-orientation="vertical"] .rail{
    inset:28px auto 28px auto;width:4px;height:auto;left:calc(42px - 2px);
  }

  .nodes{
    position:relative;width:100%;height:100%;
    display:flex;gap:0;justify-content:space-between;align-items:center;
  }
  .timeline[data-orientation="vertical"] .nodes{
    flex-direction:column;align-items:flex-start;justify-content:space-between;padding-left:42px;
  }

  .node{
    position:relative;display:inline-flex;align-items:center;justify-content:center;
    width:18px;height:18px;border-radius:999px;background:var(--node);
    border:2px solid var(--node-border);box-shadow:0 0 0 0 rgba(96,165,250,.0);
    transition:transform .08s ease, box-shadow .2s ease, background .2s ease;
  }
  .node:hover,.node:focus-visible{transform:scale(1.06)}
  .node[aria-current="true"]{
    background:linear-gradient(180deg,var(--accent),var(--accent-2));
    box-shadow:0 0 0 4px rgba(34,211,238,.15);
  }
  .node[role="button"]{cursor:pointer}

  .tick{
    position:absolute;top:calc(50% + 16px);left:50%;transform:translateX(-50%);
    color:var(--muted);font-size:12px;text-align:center;white-space:nowrap;user-select:none;
  }
  .timeline[data-orientation="vertical"] .tick{
    left:0;top:auto;transform:none;margin-left:10px;translate:0 -50%;
  }

  /* Static details container (below timeline) */
  .details{
    position:relative;background:var(--panel);border:1px solid #1c2434;border-radius:16px;
    padding:16px;display:grid;gap:6px;margin-top:8px;
  }
  .details h2{font-size:18px;margin:2px 0 0}
  .details .meta{font-size:12px;color:var(--muted)}
  .details p{margin:.25rem 0 0;color:#c6cdd7}
  .placeholder{opacity:.65}

  /* Accessibility helper */
  .sr-only{position:absolute;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>UCC Timeline — Static Details</h1>
    <div class="controls">
      <button class="btn" id="toggleOrientation" aria-pressed="false">Toggle Orientation (H/V)</button>
      <button class="btn" id="resetSelection">Reset Selection</button>
    </div>
  </header>

  <section class="timeline" id="timeline" data-orientation="horizontal" aria-label="UCC milestones">
    <div class="rail" aria-hidden="true"></div>
    <div class="nodes" id="nodes" role="list"></div>
  </section>

  <!-- Static details container lives BELOW the timeline -->
  <section class="details" id="details" role="region" aria-live="polite" aria-label="Milestone details">
    <div id="placeholder" class="placeholder">Hover or click a node to view details.</div>
    <div id="detailContent" hidden>
      <div class="meta" id="dWhen"></div>
      <h2 id="dTitle"></h2>
      <p id="dDesc"></p>
    </div>
    <div class="sr-only" id="liveRegion" aria-live="polite"></div>
  </section>

  <footer style="opacity:.7;font-size:12px;margin-top:auto">
    Tip: Use ←/→ (or ↑/↓) to move; Enter/Space to select; “Toggle Orientation” switches horizontal/vertical layouts.
  </footer>
</div>

<script>
/* --- Data: replace with your own items if needed --- */
const events = [
  { id:"e1951", when:"1951–1952", title:"Official draft approved; first Official Text published",
    desc:"ALI & NCCUSL finalize drafting; the first Official Text (1952) sets the model for state enactments." },
  { id:"e1953", when:"1953", title:"First state enactment",
    desc:"Pennsylvania enacts the UCC, pioneering adoption." },
  { id:"e1957", when:"1957", title:"Revised Official Text",
    desc:"Post–New York review, a refined Official Text spurs broader enactment." },
  { id:"e1961", when:"1961", title:"Permanent Editorial Board (PEB) created",
    desc:"ALI/ULC establish the PEB to steward interpretations and updates." },
  { id:"e1967", when:"1967", title:"Near-universal adoption",
    desc:"By the late 1960s, the UCC is adopted across almost all U.S. jurisdictions." },
  { id:"e1972", when:"1972", title:"Amendments incl. Article 9",
    desc:"Targeted revisions modernize secured transactions and other articles." },
  { id:"e1987", when:"1987", title:"Article 2A (Leases)",
    desc:"Leases of goods receive a dedicated framework." },
  { id:"e1989", when:"1989", title:"Article 4A (Funds Transfers)",
    desc:"Establishes rules for wholesale wire transfers." },
  { id:"e1994", when:"1994", title:"Revised Article 8",
    desc:"Aligns with intermediated securities and modern custody practices." },
  { id:"e2001", when:"1998 → 2001", title:"Revised Article 9 (effective 7/1/2001)",
    desc:"Comprehensive update; states coordinate a uniform effective date." },
  { id:"e2013", when:"2010 → 2013", title:"Article 9 amendments",
    desc:"Name rules and other refinements; many states effective 7/1/2013." },
  { id:"e2022", when:"2022", title:"Emerging-tech amendments incl. Article 12",
    desc:"Introduces Controllable Electronic Records (CERs) and coordinated updates across Articles 1–9." },
];

/* --- Elements --- */
const $ = s => document.querySelector(s);
const timeline = $("#timeline");
const nodesWrap = $("#nodes");
const details = $("#details");
const placeholder = $("#placeholder");
const detailContent = $("#detailContent");
const dWhen = $("#dWhen");
const dTitle = $("#dTitle");
const dDesc = $("#dDesc");
const liveRegion = $("#liveRegion");

let orientation = "horizontal";
let currentId = null;      // pinned selection
let keyboardIndex = 0;

/* --- Render --- */
function renderNodes(){
  nodesWrap.innerHTML = "";
  events.forEach((ev, idx) => {
    const holder = document.createElement("div");
    holder.style.position = "relative";
    holder.style.display = orientation==="horizontal" ? "flex" : "block";
    holder.style.alignItems = "center";
    holder.style.justifyContent = "center";

    const node = document.createElement("button");
    node.className = "node";
    node.type = "button";
    node.setAttribute("role","button");
    node.setAttribute("aria-label", `${ev.when}: ${ev.title}`);
    node.dataset.id = ev.id;

    node.addEventListener("mouseenter", () => previewEvent(ev));      // preview on hover
    node.addEventListener("focus", () => previewEvent(ev));           // preview on focus
    node.addEventListener("mouseleave", () => restorePinned());       // return to pinned after hover out
    node.addEventListener("blur", () => restorePinned());
    node.addEventListener("click", () => selectEvent(ev, idx));       // pin on click
    node.addEventListener("keydown", e => onNodeKeydown(e, idx));     // keyboard nav

    holder.appendChild(node);

    const tick = document.createElement("div");
    tick.className = "tick";
    tick.textContent = ev.when;
    holder.appendChild(tick);

    nodesWrap.appendChild(holder);
  });
  updateMarkerStyles();
}

/* --- Details panel logic --- */
function setDetails(ev){
  placeholder.hidden = true;
  detailContent.hidden = false;
  dWhen.textContent = ev.when;
  dTitle.textContent = ev.title;
  dDesc.textContent = ev.desc;
}

function clearDetails(){
  detailContent.hidden = true;
  placeholder.hidden = false;
  dWhen.textContent = dTitle.textContent = dDesc.textContent = "";
}

function previewEvent(ev){
  // Only show preview if nothing is pinned
  if(currentId === null) setDetails(ev);
}

function restorePinned(){
  if(currentId === null) return;          // nothing pinned; keep current preview (or placeholder)
  const ev = events.find(e => e.id === currentId);
  if(ev) setDetails(ev);
}

function selectEvent(ev, idx){
  currentId = ev.id;
  keyboardIndex = idx;
  setDetails(ev);
  updateMarkerStyles();
  liveRegion.textContent = `${ev.when}: ${ev.title} selected`;
}

function updateMarkerStyles(){
  document.querySelectorAll(".node").forEach(btn=>{
    btn.setAttribute("aria-current", btn.dataset.id===currentId ? "true" : "false");
  });
}

/* --- Keyboard navigation --- */
function onNodeKeydown(e, idx){
  const isH = orientation==="horizontal";
  const prevKeys = isH ? ["ArrowLeft","ArrowUp"] : ["ArrowUp","ArrowLeft"];
  const nextKeys = isH ? ["ArrowRight","ArrowDown"] : ["ArrowDown","ArrowRight"];
  if(prevKeys.includes(e.key)){ e.preventDefault(); focusIndex(Math.max(0, idx-1)); }
  if(nextKeys.includes(e.key)){ e.preventDefault(); focusIndex(Math.min(events.length-1, idx+1)); }
  if(e.key==="Home"){ e.preventDefault(); focusIndex(0); }
  if(e.key==="End"){ e.preventDefault(); focusIndex(events.length-1); }
  if(e.key==="Enter"||e.key===" "){
    e.preventDefault();
    selectEvent(events[idx], idx);
  }
}
function focusIndex(i){
  keyboardIndex = i;
  const btn = nodesWrap.querySelectorAll(".node")[i];
  btn?.focus();
}

/* --- Controls --- */
$("#toggleOrientation").addEventListener("click", e=>{
  orientation = orientation==="horizontal" ? "vertical" : "horizontal";
  timeline.dataset.orientation = orientation;
  e.currentTarget.setAttribute("aria-pressed", orientation==="vertical" ? "true" : "false");
  renderNodes();
  // Keep showing pinned selection (or placeholder) after re-render
  restorePinned();
});
$("#resetSelection").addEventListener("click", ()=>{
  currentId = null;
  clearDetails();
  updateMarkerStyles();
  nodesWrap.querySelector(".node")?.focus();
});

/* --- Init --- */
renderNodes();
clearDetails();

/* Respect reduced motion: remove transitions if requested */
const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
if(mq.matches){
  document.querySelectorAll('.node').forEach(n=>n.style.transition="none");
}
</script>
</body>
</html>